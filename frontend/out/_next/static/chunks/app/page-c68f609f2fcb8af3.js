(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3792:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var l=n(5155),r=n(6874),s=n.n(r),c=n(2115);function u(){let[e,t]=(0,c.useState)({state:!1,pending:!1}),[n,r]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{!async function(){t(e=>({...e,pending:!0}));let e=await fetch("".concat("http://localhost:8000/api","/session"),{method:"GET",cache:"no-cache",credentials:"include"});if(200==e.status){t(()=>({state:!0,pending:!1}));let{role:n}=await e.json();"admin"==n&&r(()=>!0)}else t(e=>({...e,pending:!1}))}()},[]),(0,l.jsx)(l.Fragment,{children:!1==e.pending?(0,l.jsxs)("div",{className:"flex flex-col gap-4 w-full h-full items-center justify-center",children:[(0,l.jsx)("h1",{className:"flex text-5xl bold",children:"Subjex Ticket Manager"}),!0==e.state?(0,l.jsx)(function(e){let{isAdmin:n}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,l.jsx)(s(),{href:"/tickets",className:"flex px-4 py-2 rounded-sm shadow-md bg-blue-200 hover:bg-blue-400 hover:underline",children:"Check Your Tickets"}),n&&(0,l.jsx)(s(),{href:"/createTicket",className:"flex px-4 py-2 rounded-sm shadow-md text-white bg-blue-600 hover:bg-blue-800 hover:underline",children:"Create Ticket (Admin)"}),(0,l.jsx)("button",{className:"flex px-4 py-2 rounded-sm shadow-md text-white bg-gray-600 hover:bg-gray-800 hover:underline",onClick:()=>{fetch("".concat("http://localhost:8000/api","/logout"),{method:"POST",cache:"no-cache",credentials:"include"}),t(e=>({...e,state:!1}))},children:"Logout"})]})})},{isAdmin:n}):(0,l.jsx)(function(){return(0,l.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,l.jsx)(s(),{href:"/login",className:"flex px-4 py-2 rounded-sm shadow-md bg-blue-200 hover:bg-blue-400 hover:underline",children:"Login"}),(0,l.jsx)(s(),{href:"/createAccount",className:"flex px-4 py-2 rounded-sm shadow-md text-white bg-blue-600 hover:bg-blue-800 hover:underline",children:"Create Account"})]})},{})]}):(0,l.jsx)("p",{className:"flex w-full h-full items-center justify-center text-center italic text-2xl",children:"Checking Credentials..."})})}},4205:(e,t,n)=>{Promise.resolve().then(n.bind(n,3792))},6654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return r}});let l=n(2115);function r(e,t){let n=(0,l.useRef)(null),r=(0,l.useRef)(null);return(0,l.useCallback)(l=>{if(null===l){let e=n.current;e&&(n.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(n.current=s(e,l)),t&&(r.current=s(t,l))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let n=e(t);return"function"==typeof n?n:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(4205)),_N_E=e.O()}]);