(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{1469:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return c},getImageProps:function(){return i}});let l=s(8229),a=s(8883),n=s(3063),r=l._(s(1193));function i(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:r.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=n.Image},4067:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var l=s(5155),a=s(6766),n=s(6874),r=s.n(n),i=s(5695),c=s(2115);let d={src:"/_next/static/media/reload.e71c158a.svg",height:24,width:24,blurWidth:0,blurHeight:0};function o(){let e=(0,i.useRouter)(),[t,s]=(0,c.useState)(!1),[n,r]=(0,c.useState)({state:!1,pending:!0}),[o,h]=(0,c.useState)(""),[f,x]=(0,c.useState)(!1),[p,m]=(0,c.useState)({state:[],pending:!0}),[g,w]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{!async function(){r(e=>({...e,pending:!0})),m(e=>({...e,pending:!0}));let t=await fetch("".concat("http://localhost:8000/api","/session"),{method:"GET",cache:"no-cache",credentials:"include"});if(200==t.status){r(()=>({state:!0,pending:!1}));let{role:e,username:s}=await t.json();"admin"==e&&x(()=>!0),null!=s&&h(s);let l=await fetch("".concat("http://localhost:8000/api","/tickets"),{method:"GET",cache:"no-cache",credentials:"include"}),a=await l.json();m(()=>({state:a,pending:!1}))}else{r(e=>({...e,pending:!1})),e.replace("/");}}()},[t,e]),!0==n.pending)?(0,l.jsx)("p",{className:"flex w-full h-full items-center justify-center text-center italic text-2xl",children:"Checking Credentials..."}):!1==n.pending&&!1==n.state?(0,l.jsx)("p",{className:"flex w-full h-full items-center justify-center text-center italic text-2xl",children:"Not Logged In... Not authorised, being redirected."}):(0,l.jsxs)("div",{className:"flex w-full h-full flex-col gap-4 items-center justify-center",children:[(0,l.jsxs)("div",{className:"flex flex-row w-[80%] h-fit",children:[!0==f?(0,l.jsxs)("h1",{className:"flex w-full h-fit text-3xl bold",children:[o,"'s Tickets (Admin)"]}):(0,l.jsxs)("h1",{className:"flex w-full h-fit text-3xl bold",children:[o,"'s Tickets"]}),(0,l.jsxs)("div",{className:"flex w-full h-fit flex-row gap-4 justify-end self-end",children:[(0,l.jsx)("button",{className:"flex",onClick:()=>{w(e=>!e)},children:!0==g?(0,l.jsx)("div",{className:"px-4 py-2 bg-purple-200 hover:bg-purple-400 hover:underline rounded-sm shadow-md",children:"Hiding Closed Tickets"}):(0,l.jsx)("div",{className:"px-4 py-2 bg-pink-200 hover:bg-pink-400 hover:underline rounded-sm shadow-md",children:"Showing Closed Tickets"})}),(0,l.jsx)("button",{className:"flex text-1xl px-4 py-2 bg-blue-200 hover:bg-blue-400 hover:underline rounded-sm shadow-md",onClick:()=>s(e=>!e),children:(0,l.jsx)(a.default,{src:d,alt:"Reload Icon"})})]})]}),!0==p.pending?(0,l.jsx)("p",{className:"flex w-full h-full items-center justify-center text-center italic text-2xl",children:"Fetching Tickets..."}):(0,l.jsx)("div",{className:"flex w-[80%] h-fit flex-col gap-4",children:p.state.filter(e=>!("closed"===e.status.toLowerCase()&&g)).map(e=>(0,l.jsx)(u,{data:e},e.id))})]})}function u(e){let{data:t}=e;return(0,l.jsxs)(r(),{href:"tickets/lookup?id=".concat(t.id),className:"flex flex-col gap-2 h-fit w-full border-gray-400 border-[1px] rounded-md shadow-sm p-4 hover:bg-gray-100 group hover:cursor-pointer",children:[(0,l.jsxs)("div",{className:"flex flex-row pr-4 justify-between items-center",children:[(0,l.jsx)("h2",{className:"flex text-2xl group-hover:underline",children:t.title}),"open"===t.status.toLowerCase()?(0,l.jsx)("h4",{className:"flex px-4 py-2 rounded-sm shadow-sm bg-green-300",children:t.status.toUpperCase()}):"closed"===t.status.toLowerCase()?(0,l.jsx)("h4",{className:"flex px-4 py-2 rounded-sm shadow-sm bg-red-300",children:t.status.toUpperCase()}):"in review"===t.status.toLowerCase()?(0,l.jsx)("h4",{className:"flex px-4 py-2 rounded-sm shadow-sm bg-orange-300",children:t.status.toUpperCase()}):null]}),(0,l.jsx)("div",{className:"flex h-[1px] bg-gray-400 w-full shadow-sm"}),(0,l.jsx)("p",{className:"flex text-md",children:t.description})]})}},5695:(e,t,s)=>{"use strict";var l=s(8999);s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}}),s.o(l,"useSearchParams")&&s.d(t,{useSearchParams:function(){return l.useSearchParams}})},6697:(e,t,s)=>{Promise.resolve().then(s.bind(s,4067))},6766:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var l=s(1469),a=s.n(l)}},e=>{var t=t=>e(e.s=t);e.O(0,[63,874,441,684,358],()=>t(6697)),_N_E=e.O()}]);